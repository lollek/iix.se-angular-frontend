<h1 id="installation-no-x11">Installation (No X11)</h1>
<pre><code>    # Install prerequirements (ignore virtinst if you have x11)
    sudo apt-get install qemu-kvm libvirt-bin virtinst

    sudo usermod -aG kvm $USER
    sudo usermod -aG libvirt $USER</code></pre>
<h1 id="creating-a-new-host-i.e.-guest">Creating a new host (i.e. guest)</h1>
<pre><code>    # NAME-OF-VHOST is whatever you want to call your virtual host
    # SIZE-IN-MB is how many MBs of RAM you want to give the new host
    # LOCATION is the location to install from, you can find locations by typing `man virt-install`
    # NAME-OF-DISK is what disk you want to provide to the vhost, e.g. a partition

    sudo virt-install --virt-type kvm --name NAME-OF-VHOST --memory SIZE-IN-MB --location LOCATION --extra-args &quot;console=ttyS0&quot; --disk /dev/NAME-OF-DISK

    # Example
    sudo virt-install --virt-type=kvm --name david2 --memory 16384 --location http://ftp.us.debian.org/debian/dists/stable/main/installer-amd64/ --disk /dev/vg0/lv1 --extra-args &quot;console=ttyS0&quot;</code></pre>
<h1 id="bridge-guest-to-host-network">Bridge guest to host network</h1>
<h2 id="add-network-interface">Add network interface</h2>
<p>In /etc/network/interfaces, change from</p>
<pre><code>    allow-hotplug eth0
    iface eth0 inet dhcp</code></pre>
<p>Change to</p>
<pre><code>    allow-hotplug eth0
    iface eth0 inet manual

    auto br0
    iface br0 inet dhcp
            bridge_ports eth0
            bridge_stp off
            bridge_fd 0
            bridge_maxwait 0</code></pre>
<p>And reset the network</p>
<pre><code>    sudo ifdown eth0
    sudo ifup eth0
    sudo ifup br0</code></pre>
<h2 id="in-virsh">In virsh</h2>
<p>Connect to virsh</p>
<pre><code>    virsh --connect qemu:///system</code></pre>
<p>Edit vm's xml</p>
<pre><code>    edit david2</code></pre>
<p>Change from</p>
<pre><code>    &lt;interface type=&#39;network&#39;&gt;
      &lt;mac address=&#39;52:54:00:24:ec:d9&#39;/&gt;
      &lt;source network=&#39;default&#39;/&gt;
      &lt;model type=&#39;rtl8139&#39;/&gt;
      &lt;address type=&#39;pci&#39; domain=&#39;0x0000&#39; bus=&#39;0x00&#39; slot=&#39;0x02&#39; function=&#39;0x0&#39;/&gt;
    &lt;/interface&gt;</code></pre>
<p>Change to</p>
<pre><code>    &lt;interface type=&#39;bridge&#39;&gt;
      &lt;mac address=&#39;52:54:00:24:ec:d9&#39;/&gt;
      &lt;source bridge=&#39;br0&#39;/&gt;
    &lt;/interface&gt;</code></pre>
<p>Restart vm</p>
<pre><code>    shutdown david2
    start david2</code></pre>
